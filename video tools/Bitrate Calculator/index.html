<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Video - Bitrate Calc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="../../styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Rajdhani', 'sans-serif'],
                        orbitron: ['Orbitron', 'sans-serif']
                    },
                    colors: {
                        cyber: {
                            primary: '#64748b', // Slate
                        }
                    }
                }
            }
        }
    </script>
</head>

<body
    class="min-h-screen flex flex-col font-sans overflow-x-hidden bg-slate-900 text-white selection:bg-slate-500 selection:text-white">

    <!-- 3D Background -->
    <div id="bg-3d-container"></div>

    <!-- Navigation -->
    <nav
        class="sticky top-0 z-50 glass-effect border-b border-white/5 px-4 md:px-6 py-3 flex items-center justify-between backdrop-blur-md">
        <a href="../index.html" class="flex items-center gap-3 text-slate-300 hover:text-white transition-colors group">
            <div
                class="w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/10 group-hover:border-slate-500/50 transition-all">
                <i class="fas fa-chevron-left text-xs group-hover:-translate-x-0.5 transition-transform"></i>
            </div>
            <span class="font-orbitron font-bold tracking-wider hidden md:block">BACK</span>
        </a>

        <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-slate-500/20 flex items-center justify-center text-slate-400">
                <i class="fas fa-calculator"></i>
            </div>
            <h1 class="text-lg md:text-xl font-orbitron font-bold tracking-widest text-white">SHADOW<span
                    class="text-slate-500">CALC</span></h1>
        </div>

        <div class="w-8"></div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 relative z-10 flex flex-col items-center justify-center gap-6">

        <div class="w-full max-w-2xl glass p-8 rounded-3xl border border-white/10 shadow-2xl">
            <h2 class="text-2xl font-orbitron font-bold text-center mb-8">Bitrate Calculator</h2>

            <div class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-400 uppercase tracking-widest">Video Duration</label>
                        <div class="flex gap-2">
                            <input type="number" id="hh" placeholder="HH"
                                class="w-full bg-slate-950/50 border border-white/10 rounded-lg px-3 py-3 text-white focus:border-slate-500"
                                oninput="calc()">
                            <input type="number" id="mm" placeholder="MM"
                                class="w-full bg-slate-950/50 border border-white/10 rounded-lg px-3 py-3 text-white focus:border-slate-500"
                                oninput="calc()">
                            <input type="number" id="ss" placeholder="SS" value="0"
                                class="w-full bg-slate-950/50 border border-white/10 rounded-lg px-3 py-3 text-white focus:border-slate-500"
                                oninput="calc()">
                        </div>
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-400 uppercase tracking-widest">Target File
                            Size</label>
                        <div class="flex gap-2">
                            <input type="number" id="size" value="100"
                                class="w-full bg-slate-950/50 border border-white/10 rounded-lg px-3 py-3 text-white focus:border-slate-500"
                                oninput="calc()">
                            <select id="unit"
                                class="bg-slate-950/50 border border-white/10 rounded-lg px-3 py-3 text-white"
                                onchange="calc()">
                                <option value="MB">MB</option>
                                <option value="GB">GB</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="text-xs font-bold text-slate-400 uppercase tracking-widest">Audio Bitrate
                        (kbps)</label>
                    <input type="range" id="audio" min="64" max="320" value="128" class="w-full" oninput="calc()">
                    <div class="text-right text-xs text-slate-400"><span id="audioVal">128</span> kbps</div>
                </div>
            </div>

            <div class="mt-8 pt-8 border-t border-white/5 flex flex-col items-center">
                <span class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-2">Recommended Video
                    Bitrate</span>
                <div
                    class="text-5xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-slate-200 to-slate-400">
                    <span id="result">0</span> <span class="text-2xl">kbps</span>
                </div>
            </div>

        </div>

    </main>

    <script type="module" src="../../shared/bg-particles.js"></script>
    <script>
        function calc() {
            const h = parseInt(document.getElementById('hh').value) || 0;
            const m = parseInt(document.getElementById('mm').value) || 0;
            const s = parseInt(document.getElementById('ss').value) || 0;
            const size = parseFloat(document.getElementById('size').value) || 0;
            const unit = document.getElementById('unit').value;
            const audio = parseInt(document.getElementById('audio').value);

            document.getElementById('audioVal').innerText = audio;

            if (size === 0) return;

            const totalSeconds = (h * 3600) + (m * 60) + s;
            if (totalSeconds === 0) return;

            // Size in bits
            let sizeBits = size * 8 * 1024 * 1024; // MB to bits
            if (unit === 'GB') sizeBits *= 1024;

            // Available for Video = Total - Audio
            const audioBits = audio * 1024 * totalSeconds;
            const videoBits = sizeBits - audioBits;

            if (videoBits < 0) {
                document.getElementById('result').textContent = "Impossible";
                return;
            }

            const videoKbps = (videoBits / totalSeconds) / 1024;
            document.getElementById('result').textContent = Math.floor(videoKbps);
        }
    </script>
</body>

</html>