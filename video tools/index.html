<!DOCTYPE html>
<html lang="en" class="scroll-smooth antialiased">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Video | Cinematic Intelligence</title>

    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Restored User Project Styles -->
    <link rel="stylesheet" href="../styles.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;500;700&family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Rajdhani', 'sans-serif'],
                        display: ['Space Grotesk', 'Orbitron', 'sans-serif'],
                        mono: ['JetBrains Mono', 'Courier New', 'monospace'],
                    },
                    colors: {
                        slate: {
                            850: '#101623',
                            900: '#0f172a',
                            950: '#020617',
                        },
                        // Crimson/Red Theme for Video Tools
                        accent: {
                            400: '#f87171', // Red-400
                            500: '#ef4444', // Red-500
                            600: '#dc2626', // Red-600
                            glow: 'rgba(239, 68, 68, 0.5)'
                        }
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml,%3Csvg viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cfilter id=\"noiseFilter\"%3E%3CfeTurbulence type=\"fractalNoise\" baseFrequency=\"0.65\" numOctaves=\"3\" stitchTiles=\"stitch\"/%3E%3C/filter%3E%3Crect width=\"100%25\" height=\"100%25\" filter=\"url(%23noiseFilter)\" opacity=\"0.05\"/%3E%3C/svg%3E')",
                    },
                    animation: {
                        'float': 'float 8s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Base Setup */
        :root {
            --card-rotate-x: 0deg;
            --card-rotate-y: 0deg;
        }

        body {
            background-color: #020617;
        }

        /* 3D Container for user's bg-particles.js */
        #bg-3d-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.6;
        }

        /* Cinematic Noise Overlay */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            opacity: 0.6;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #020617;
        }

        ::-webkit-scrollbar-thumb {
            background: #1e293b;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ef4444;
        }

        /* 3D Card Effects */
        .perspective-container {
            perspective: 1000px;
        }

        .holographic-card {
            transform-style: preserve-3d;
            background: rgba(30, 41, 59, 0.3);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: transform 0.1s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0);
        }

        .holographic-card:hover {
            border-color: rgba(248, 113, 113, 0.4);
            box-shadow:
                0 0 30px -10px rgba(239, 68, 68, 0.15),
                0 0 0 1px rgba(239, 68, 68, 0.1);
            z-index: 10;
        }

        /* Inner Glow Gradient for Cards */
        .card-glow {
            position: absolute;
            inset: 0;
            background: radial-gradient(800px circle at var(--mouse-x) var(--mouse-y),
                    rgba(255, 255, 255, 0.04),
                    transparent 40%);
            z-index: 2;
            pointer-events: none;
        }

        /* Text Scramble Effect Class */
        .dud {
            color: #f87171;
            opacity: 0.7;
        }

        /* Command Palette */
        .cmd-palette-backdrop {
            background: rgba(2, 6, 23, 0.8);
            backdrop-filter: blur(8px);
        }

        .cmd-item.selected {
            background: rgba(239, 68, 68, 0.1);
            border-left-color: #f87171;
        }

        /* Utility */
        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-dropdown {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: top;
        }

        .nav-dropdown.hidden {
            display: none;
            opacity: 0;
            transform: scale(0.95);
        }

        .nav-dropdown:not(.hidden) {
            display: block;
            opacity: 1;
            transform: scale(1);
        }

        .text-gradient {
            background: linear-gradient(135deg, #fff 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body
    class="bg-slate-950 text-slate-200 min-h-screen relative selection:bg-accent-500/30 selection:text-accent-400 font-sans overflow-x-hidden">

    <!-- Noise Overlay -->
    <div class="noise-overlay"></div>

    <!-- Restored: Background Container for Shared Script -->
    <div id="bg-3d-container"></div>

    <!-- Ambient Deep Glows (Red/Orange) -->
    <div
        class="fixed top-[-20%] left-[-10%] w-[60%] h-[60%] bg-red-900/10 rounded-full blur-[150px] pointer-events-none z-0 animate-pulse">
    </div>
    <div
        class="fixed bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-orange-900/10 rounded-full blur-[150px] pointer-events-none z-0 animate-pulse">
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-[60] transition-all duration-300 border-b border-transparent" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">

                <!-- Left Section: 9-Dot Menu & Logo -->
                <div class="flex items-center gap-4 sm:gap-6">
                    <!-- 9-Dot Menu Trigger -->
                    <button onclick="toggleAppsMenu()"
                        class="p-2 rounded-lg text-slate-400 hover:text-white hover:bg-white/10 transition-colors relative group">
                        <i class="fas fa-th text-lg sm:text-xl group-hover:text-accent-400 transition-colors"></i>
                    </button>

                    <!-- Logo -->
                    <div class="flex items-center gap-3 group cursor-pointer" onclick="window.scrollTo(0,0)">
                        <div
                            class="relative w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center bg-slate-800/50 rounded-xl border border-white/10 overflow-hidden group-hover:border-accent-500/50 transition-colors duration-300">
                            <div
                                class="absolute inset-0 bg-gradient-to-tr from-accent-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
                            </div>
                            <i class="fas fa-video text-accent-400 text-base sm:text-lg relative z-10"></i>
                        </div>
                        <div class="flex flex-col">
                            <span
                                class="text-base sm:text-lg font-display font-bold tracking-tight text-white leading-none">SHADOW<span
                                    class="text-accent-400">VIDEO</span></span>
                            <span class="text-[10px] text-slate-500 font-mono tracking-widest uppercase mt-0.5">OPS:
                                v3.0.1</span>
                        </div>
                    </div>
                </div>

                <!-- Right Section -->
                <div class="flex items-center gap-3">
                    <!-- Desktop Command Palette Button -->
                    <button onclick="toggleCmdPalette()"
                        class="hidden md:flex px-3 py-1.5 rounded-lg bg-slate-800/50 border border-white/10 text-xs text-slate-400 hover:text-white hover:border-accent-500/30 transition-all items-center gap-2 group">
                        <span class="group-hover:text-accent-400 transition-colors">Search Tools</span>
                        <kbd
                            class="px-1.5 py-0.5 rounded border border-slate-600 bg-slate-800 text-[10px] font-mono text-slate-400">⌘K</kbd>
                    </button>

                    <!-- Mobile Filter Toggle (Replaces Hamburger) -->
                    <button onclick="toggleFilterMenu()"
                        class="md:hidden p-2 rounded-lg text-slate-400 hover:bg-white/5 hover:text-white transition-colors cursor-pointer relative z-50 group">
                        <i class="fas fa-sliders-h text-xl group-hover:text-accent-400 transition-colors"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Apps Menu Dropdown (Left Side - 9 Dots) -->
        <div id="apps-menu"
            class="nav-dropdown hidden absolute top-16 left-4 w-64 bg-slate-900/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl p-2 z-[70]">
            <div class="grid grid-cols-2 gap-2">
                <a href="../index.html"
                    class="flex flex-col items-center justify-center p-4 rounded-lg bg-white/5 hover:bg-accent-500/10 hover:border-accent-500/30 border border-transparent transition-all group">
                    <i class="fas fa-home text-xl mb-2 text-slate-400 group-hover:text-accent-400"></i>
                    <span class="text-xs font-medium text-slate-300 group-hover:text-white">Home</span>
                </a>
                <a href="../text tools/index.html"
                    class="flex flex-col items-center justify-center p-4 rounded-lg bg-white/5 hover:bg-sky-500/10 hover:border-sky-500/30 border border-transparent transition-all group">
                    <i class="fas fa-keyboard text-xl mb-2 text-slate-400 group-hover:text-sky-400"></i>
                    <span class="text-xs font-medium text-slate-300 group-hover:text-white">Text</span>
                </a>
                <a href="../image tools/index.html"
                    class="flex flex-col items-center justify-center p-4 rounded-lg bg-white/5 hover:bg-purple-500/10 hover:border-purple-500/30 border border-transparent transition-all group">
                    <i class="fas fa-image text-xl mb-2 text-slate-400 group-hover:text-purple-400"></i>
                    <span class="text-xs font-medium text-slate-300 group-hover:text-white">Image</span>
                </a>
                <a href="../audio tools/index.html"
                    class="flex flex-col items-center justify-center p-4 rounded-lg bg-white/5 hover:bg-emerald-500/10 hover:border-emerald-500/30 border border-transparent transition-all group">
                    <i class="fas fa-music text-xl mb-2 text-slate-400 group-hover:text-emerald-400"></i>
                    <span class="text-xs font-medium text-slate-300 group-hover:text-white">Audio</span>
                </a>
            </div>
        </div>

        <!-- Mobile Filter Menu (Right Side) -->
        <div id="filter-menu"
            class="nav-dropdown hidden absolute top-20 right-4 w-56 bg-slate-900/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl z-[70] overflow-hidden">
            <div class="p-3 border-b border-white/5 bg-slate-950/30">
                <span class="text-xs font-mono text-slate-500 uppercase tracking-wider pl-2">Filter Tools</span>
            </div>
            <div class="p-2 space-y-1">
                <button onclick="setFilter('all')"
                    class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-white/10 hover:text-white flex items-center justify-between group">
                    <span>All Tools</span>
                    <i class="fas fa-check text-accent-400 opacity-0 group-[.active]:opacity-100 check-icon"></i>
                </button>
                <button onclick="setFilter('convert')"
                    class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-white/10 hover:text-white flex items-center justify-between group">
                    <span>Converters</span>
                    <i class="fas fa-exchange-alt text-slate-500 group-hover:text-white text-xs"></i>
                </button>
                <button onclick="setFilter('edit')"
                    class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-white/10 hover:text-white flex items-center justify-between group">
                    <span>Editors</span>
                    <i class="fas fa-cut text-slate-500 group-hover:text-white text-xs"></i>
                </button>
                <button onclick="setFilter('generator')"
                    class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-white/10 hover:text-white flex items-center justify-between group">
                    <span>Recorders</span>
                    <i class="fas fa-video text-slate-500 group-hover:text-white text-xs"></i>
                </button>
                <button onclick="setFilter('utility')"
                    class="w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-white/10 hover:text-white flex items-center justify-between group">
                    <span>Utilities</span>
                    <i class="fas fa-tools text-slate-500 group-hover:text-white text-xs"></i>
                </button>
            </div>
            <div class="p-2 border-t border-white/5">
                <button onclick="toggleCmdPalette(); toggleFilterMenu();"
                    class="w-full text-left px-3 py-2 rounded-lg bg-slate-800/50 text-xs text-slate-400 hover:text-white border border-transparent hover:border-white/10 transition-all flex items-center gap-2">
                    <i class="fas fa-search"></i> Search all tools...
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main
        class="relative z-10 pt-32 pb-24 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto flex flex-col items-center min-h-[85vh]">

        <!-- Hero Section -->
        <div class="text-center max-w-4xl mx-auto mb-16 md:mb-20 animate-float w-full">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-900/50 border border-accent-500/30 text-accent-400 text-[10px] sm:text-xs font-mono font-medium mb-6 sm:mb-8 backdrop-blur-sm hover:bg-accent-500/10 transition-colors cursor-default shadow-[0_0_15px_-3px_rgba(239,68,68,0.3)]">
                <span class="relative flex h-2 w-2">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-accent-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-accent-500"></span>
                </span>
                SYSTEM ONLINE
            </div>

            <h1
                class="text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-display font-bold tracking-tight mb-6 sm:mb-8 leading-[1.1]">
                <span id="hero-title-1" class="text-gradient">Cinematic</span> <br />
                <span id="hero-title-2" class="text-white relative inline-block">
                    Processing
                    <svg class="absolute w-full h-2 sm:h-3 -bottom-1 left-0 text-accent-500 opacity-60"
                        viewBox="0 0 200 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.00025 6.99997C2.00025 6.99997 101.996 -2.48624 199 7.00003" stroke="currentColor"
                            stroke-width="3" />
                    </svg>
                </span>
            </h1>

            <p
                class="text-base sm:text-lg md:text-xl text-slate-400 leading-relaxed max-w-2xl mx-auto mb-8 sm:mb-10 font-light px-2">
                Edit, convert, and capture video streams.
                <span class="text-accent-400 font-normal block sm:inline">Professional Grade.</span>
            </p>

            <!-- Search Bar -->
            <div class="relative max-w-md mx-auto w-full group cursor-text px-2" onclick="toggleCmdPalette()">
                <div
                    class="absolute -inset-0.5 bg-gradient-to-r from-accent-500 to-orange-500 rounded-2xl blur opacity-25 group-hover:opacity-60 transition duration-500">
                </div>
                <div
                    class="relative flex items-center bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden py-3 sm:py-4 px-4 sm:px-5">
                    <i class="fas fa-search text-slate-500 mr-3"></i>
                    <span class="text-slate-500 text-sm sm:text-base truncate">Type to search tools...</span>
                    <div class="ml-auto">
                        <kbd
                            class="hidden md:inline-block px-2 py-1 bg-slate-800 rounded-md text-xs text-slate-500 border border-white/5 font-mono">⌘K</kbd>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="flex flex-wrap justify-center gap-2 mb-10 sm:mb-12 px-2" id="filter-container">
            <button
                class="filter-btn active px-4 py-1.5 sm:px-5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all bg-white/10 text-white border border-white/10 hover:bg-white/20 hover:scale-105"
                onclick="setFilter('all')" data-filter="all">All</button>
            <button
                class="filter-btn px-4 py-1.5 sm:px-5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all text-slate-400 border border-transparent hover:text-white hover:bg-white/5 hover:scale-105"
                onclick="setFilter('convert')" data-filter="convert">Convert</button>
            <button
                class="filter-btn px-4 py-1.5 sm:px-5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all text-slate-400 border border-transparent hover:text-white hover:bg-white/5 hover:scale-105"
                onclick="setFilter('edit')" data-filter="edit">Edit</button>
            <button
                class="filter-btn px-4 py-1.5 sm:px-5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all text-slate-400 border border-transparent hover:text-white hover:bg-white/5 hover:scale-105"
                onclick="setFilter('generator')" data-filter="generator">Recorder</button>
            <button
                class="filter-btn px-4 py-1.5 sm:px-5 sm:py-2 rounded-full text-xs sm:text-sm font-medium transition-all text-slate-400 border border-transparent hover:text-white hover:bg-white/5 hover:scale-105"
                onclick="setFilter('utility')" data-filter="utility">Utility</button>
        </div>

        <!-- Tools Grid -->
        <div id="toolsGrid"
            class="perspective-container grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 w-full max-w-7xl">
            <!-- Tool Cards injected via JS -->
        </div>

        <!-- No Results State -->
        <div id="noResults" class="hidden flex-col items-center justify-center py-20 text-center">
            <div
                class="w-16 h-16 bg-slate-800/50 rounded-full flex items-center justify-center mb-4 ring-1 ring-white/10">
                <i class="fas fa-search text-slate-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-display font-medium text-white mb-2">No tools located</h3>
            <p class="text-slate-500">Refine your search parameters.</p>
        </div>

    </main>

    <!-- Footer -->
    <footer class="border-t border-white/5 bg-slate-950 py-12 relative z-10">
        <div class="max-w-7xl mx-auto px-4 flex flex-col items-center justify-center">
            <div class="flex items-center gap-2 mb-4 opacity-50 hover:opacity-100 transition-opacity">
                <i class="fas fa-code text-accent-500"></i>
                <span class="text-slate-500 text-sm font-mono">ENCODED_BY_SHADOW</span>
            </div>
            <p class="text-slate-600 text-sm text-center">
                &copy; 2024 Shadow Text Operations. Neural Interface v3.
            </p>
        </div>
    </footer>

    <!-- Command Palette Modal -->
    <div id="cmdPalette" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 cmd-palette-backdrop transition-opacity duration-300" onclick="toggleCmdPalette()">
        </div>
        <div class="absolute top-[10%] sm:top-[15%] left-1/2 -translate-x-1/2 w-[95%] sm:w-full max-w-2xl px-0 sm:px-4">
            <div class="bg-slate-900 border border-white/10 rounded-xl shadow-2xl overflow-hidden transform transition-all duration-300 scale-95 opacity-0"
                id="cmdContent">
                <div class="relative border-b border-white/5">
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"></i>
                    <input type="text" id="cmdInput"
                        class="w-full bg-transparent text-white p-4 pl-12 text-base sm:text-lg focus:outline-none placeholder-slate-600"
                        placeholder="Type a command or search tools..." autocomplete="off">
                    <div class="absolute right-4 top-1/2 -translate-y-1/2">
                        <span
                            class="text-xs text-slate-600 font-mono border border-slate-700 rounded px-1.5 py-0.5">ESC</span>
                    </div>
                </div>
                <div class="max-h-[50vh] sm:max-h-[60vh] overflow-y-auto p-2" id="cmdResults">
                    <div id="cmdRecent" class="mb-2 hidden">
                        <div class="px-3 py-2 text-xs font-mono text-slate-500 uppercase tracking-wider">Recently Used
                        </div>
                        <div id="cmdRecentList"></div>
                    </div>
                    <div class="px-3 py-2 text-xs font-mono text-slate-500 uppercase tracking-wider">Available Tools
                    </div>
                    <div id="cmdToolsList"></div>
                </div>
                <div class="bg-slate-950/50 p-2 border-t border-white/5 flex items-center justify-between px-4">
                    <div class="flex gap-4 text-[10px] text-slate-500 font-mono">
                        <span class="hidden sm:inline"><i class="fas fa-arrow-up mr-1"></i><i
                                class="fas fa-arrow-down mr-1"></i>Navigate</span>
                        <span class="hidden sm:inline"><i class="fas fa-level-down-alt mr-1 rotate-90"></i>Select</span>
                        <span class="sm:hidden">Tap to select</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- Configuration & Data ---
        const tools = [
            // Converters
            { title: "Video Converter", desc: "Convert between MP4, WebM, AVI.", icon: "fa-exchange-alt", color: "text-red-400", bg: "bg-red-500/10", category: "convert", link: "./Video Converter/index.html", tags: "format, change, file" },
            { title: "Video to Audio", desc: "Extract MP3 from video files.", icon: "fa-music", color: "text-orange-400", bg: "bg-orange-500/10", category: "convert", link: "./Video to Audio/index.html", tags: "extract, sound, mp3" },
            { title: "Video to GIF", desc: "Create GIFs from video clips.", icon: "fa-images", color: "text-yellow-400", bg: "bg-yellow-500/10", category: "convert", link: "./Video to GIF/index.html", tags: "animation, loop, image" },

            // Editors
            { title: "Video Trimmer", desc: "Cut and trim video segments.", icon: "fa-cut", color: "text-blue-400", bg: "bg-blue-500/10", category: "edit", link: "./Video Trimmer/index.html", tags: "cut, shorten, clip" },
            { title: "Video Cropper", desc: "Crop video dimensions.", icon: "fa-crop-alt", color: "text-teal-400", bg: "bg-teal-500/10", category: "edit", link: "./Video Cropper/index.html", tags: "resize, aspect, ratio" },
            { title: "Rotate Video", desc: "Fix orientation issues.", icon: "fa-redo", color: "text-purple-400", bg: "bg-purple-500/10", category: "edit", link: "./Rotate Video/index.html", tags: "turn, flip, degrees" },
            { title: "Speed Changer", desc: "Slow mo or fast forward.", icon: "fa-tachometer-alt", color: "text-green-400", bg: "bg-green-500/10", category: "edit", link: "./Video Speed Changer/index.html", tags: "tempo, time, fast" },
            { title: "Reverse Video", desc: "Play video backwards.", icon: "fa-history", color: "text-pink-400", bg: "bg-pink-500/10", category: "edit", link: "./Reverse Video/index.html", tags: "rewind, backwards, fx" },
            { title: "Loop Video", desc: "Create seamless loops.", icon: "fa-infinity", color: "text-indigo-400", bg: "bg-indigo-500/10", category: "edit", link: "./Loop Video/index.html", tags: "repeat, endless" },
            { title: "Flip Video", desc: "Mirror video horizontally/vertically.", icon: "fa-arrows-alt-h", color: "text-cyan-400", bg: "bg-cyan-500/10", category: "edit", link: "./Flip Video/index.html", tags: "mirror, reflect" },

            // Generators / Recorders
            { title: "Screen Recorder", desc: "Capture your desktop screen.", icon: "fa-desktop", color: "text-emerald-400", bg: "bg-emerald-500/10", category: "generator", link: "./Screen Recorder/index.html", tags: "capture, record, monitor" },
            { title: "Webcam Recorder", desc: "Record from camera.", icon: "fa-video", color: "text-rose-400", bg: "bg-rose-500/10", category: "generator", link: "./Webcam Recorder/index.html", tags: "camera, selfie, vlog" },

            // Utilities
            { title: "Video Compressor", desc: "Reduce file size efficiently.", icon: "fa-compress-arrows-alt", color: "text-sky-400", bg: "bg-sky-500/10", category: "utility", link: "./Video Compressor/index.html", tags: "shrink, size, small" },
            { title: "Video Player", desc: "Universal video playback.", icon: "fa-play-circle", color: "text-gray-400", bg: "bg-gray-500/10", category: "utility", link: "./Video Player/index.html", tags: "watch, view, media" },
            { title: "Mute Video", desc: "Remove audio track.", icon: "fa-volume-mute", color: "text-red-400", bg: "bg-red-500/10", category: "utility", link: "./Mute Video/index.html", tags: "silent, quiet, sound" },
            { title: "Video Metadata", desc: "View detailed file info.", icon: "fa-info-circle", color: "text-amber-400", bg: "bg-amber-500/10", category: "utility", link: "./Video Metadata/index.html", tags: "exif, info, codec" },
        ];

        // --- Core Logic: Text Scramble Effect ---
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}—=+*^?#________';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += `<span class="dud">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            const title1 = new TextScramble(document.getElementById('hero-title-1'));
            setTimeout(() => { title1.setText('Cinematic'); }, 500);

            renderTools();
            initCmdPalette();
        });

        // --- Navigation Logic ---
        function toggleAppsMenu() {
            const menu = document.getElementById('apps-menu');
            const filterMenu = document.getElementById('filter-menu');
            if (!filterMenu.classList.contains('hidden')) filterMenu.classList.add('hidden');
            menu.classList.toggle('hidden');
        }

        function toggleFilterMenu() {
            const menu = document.getElementById('filter-menu');
            const appsMenu = document.getElementById('apps-menu');
            if (!appsMenu.classList.contains('hidden')) appsMenu.classList.add('hidden');
            menu.classList.toggle('hidden');
        }

        function setFilter(filter) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.filter === filter) {
                    btn.classList.add('active', 'bg-white/10', 'text-white', 'border-white/10');
                    btn.classList.remove('text-slate-400', 'border-transparent');
                } else {
                    btn.classList.remove('active', 'bg-white/10', 'text-white', 'border-white/10');
                    btn.classList.add('text-slate-400', 'border-transparent');
                }
            });
            renderTools(filter);
            const filterMenu = document.getElementById('filter-menu');
            if (!filterMenu.classList.contains('hidden')) {
                filterMenu.classList.add('hidden');
            }
        }

        window.toggleAppsMenu = toggleAppsMenu;
        window.toggleFilterMenu = toggleFilterMenu;
        window.setFilter = setFilter;


        // --- Tool Rendering & Interaction ---
        const grid = document.getElementById('toolsGrid');

        function renderTools(filter = 'all', searchTerm = '') {
            grid.innerHTML = '';

            const filteredTools = tools.filter(tool => {
                const matchesCategory = filter === 'all' || tool.category === filter;
                const searchLower = searchTerm.toLowerCase();
                const matchesSearch = tool.title.toLowerCase().includes(searchLower) ||
                    tool.desc.toLowerCase().includes(searchLower) ||
                    tool.tags.includes(searchLower);
                return matchesCategory && matchesSearch;
            });

            if (filteredTools.length === 0) {
                grid.classList.add('hidden');
                document.getElementById('noResults').classList.remove('hidden');
                document.getElementById('noResults').classList.add('flex');
            } else {
                grid.classList.remove('hidden');
                document.getElementById('noResults').classList.add('hidden');
                document.getElementById('noResults').classList.remove('flex');

                filteredTools.forEach((tool, index) => {
                    const card = document.createElement('a');
                    card.href = tool.link;
                    card.className = `holographic-card relative rounded-2xl p-5 sm:p-6 flex items-start gap-4 sm:gap-5 group overflow-hidden block`;
                    card.onclick = () => addToRecent(tool.title);

                    card.style.opacity = '0';
                    card.style.animation = `float 6s ease-in-out infinite`;
                    card.style.animationDelay = `${index * 0.1}s`;
                    setTimeout(() => { card.style.transition = 'opacity 0.5s ease'; card.style.opacity = '1'; }, index * 50);

                    card.innerHTML = `
                        <div class="card-glow"></div>
                        <div class="${tool.bg} ${tool.color} w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shrink-0 border border-white/5 group-hover:scale-110 transition-transform duration-500 z-10 shadow-lg shadow-${tool.color.split('-')[1]}-500/20">
                            <i class="fas ${tool.icon} text-lg sm:text-xl"></i>
                        </div>
                        <div class="flex flex-col z-10 relative">
                            <h4 class="text-base sm:text-lg font-display font-bold text-slate-100 group-hover:text-accent-400 transition-colors mb-1 flex items-center gap-2">
                                ${tool.title}
                                <i class="fas fa-chevron-right text-[10px] opacity-0 -translate-x-2 group-hover:translate-x-0 group-hover:opacity-100 transition-all text-accent-400 hidden sm:inline-block"></i>
                            </h4>
                            <p class="text-xs sm:text-sm text-slate-400 group-hover:text-slate-300 transition-colors leading-relaxed font-light">${tool.desc}</p>
                            <div class="mt-3 flex gap-2">
                                ${tool.tags.split(', ').slice(0, 2).map(tag => `<span class="text-[10px] uppercase tracking-wider text-slate-600 bg-slate-900/50 px-1.5 py-0.5 rounded border border-white/5">${tag}</span>`).join('')}
                            </div>
                        </div>
                    `;

                    if (window.innerWidth > 768) {
                        card.addEventListener('mousemove', (e) => {
                            const rect = card.getBoundingClientRect();
                            const x = e.clientX - rect.left;
                            const y = e.clientY - rect.top;
                            card.style.setProperty('--mouse-x', `${x}px`);
                            card.style.setProperty('--mouse-y', `${y}px`);
                            const centerX = rect.width / 2;
                            const centerY = rect.height / 2;
                            const rotateX = ((y - centerY) / centerY) * -8;
                            const rotateY = ((x - centerX) / centerX) * 8;
                            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
                        });
                        card.addEventListener('mouseleave', () => {
                            card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
                        });
                    }
                    grid.appendChild(card);
                });
            }
        }

        // --- Command Palette Logic ---
        const cmdPalette = document.getElementById('cmdPalette');
        const cmdContent = document.getElementById('cmdContent');
        const cmdInput = document.getElementById('cmdInput');
        const cmdToolsList = document.getElementById('cmdToolsList');
        const cmdRecentList = document.getElementById('cmdRecentList');
        const cmdRecent = document.getElementById('cmdRecent');
        let selectedIndex = 0;

        function toggleCmdPalette() {
            const isHidden = cmdPalette.classList.contains('hidden');
            if (isHidden) {
                cmdPalette.classList.remove('hidden');
                setTimeout(() => {
                    cmdContent.classList.remove('scale-95', 'opacity-0');
                    cmdContent.classList.add('scale-100', 'opacity-100');
                    cmdInput.focus();
                }, 10);
                renderCmdList();
            } else {
                cmdContent.classList.remove('scale-100', 'opacity-100');
                cmdContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    cmdPalette.classList.add('hidden');
                }, 200);
            }
        }

        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                toggleCmdPalette();
            }
            if (e.key === 'Escape' && !cmdPalette.classList.contains('hidden')) {
                toggleCmdPalette();
            }
        });

        function addToRecent(toolTitle) {
            let recent = JSON.parse(localStorage.getItem('shadowRecentVideo') || '[]');
            recent = recent.filter(t => t !== toolTitle);
            recent.unshift(toolTitle);
            if (recent.length > 3) recent.pop();
            localStorage.setItem('shadowRecentVideo', JSON.stringify(recent));
        }

        function renderCmdList(filter = '') {
            cmdToolsList.innerHTML = '';
            cmdRecentList.innerHTML = '';
            const recent = JSON.parse(localStorage.getItem('shadowRecentVideo') || '[]');
            if (recent.length > 0 && filter === '') {
                cmdRecent.classList.remove('hidden');
                recent.forEach(title => {
                    const tool = tools.find(t => t.title === title);
                    if (tool) cmdRecentList.appendChild(createCmdItem(tool, true));
                });
            } else {
                cmdRecent.classList.add('hidden');
            }
            const filtered = tools.filter(t =>
                t.title.toLowerCase().includes(filter.toLowerCase()) ||
                t.tags.includes(filter.toLowerCase())
            );
            filtered.forEach(tool => {
                cmdToolsList.appendChild(createCmdItem(tool));
            });
            selectedIndex = 0;
            updateSelection();
        }

        function createCmdItem(tool, isRecent = false) {
            const div = document.createElement('a');
            div.href = tool.link;
            div.className = `cmd-item block px-4 py-3 border-l-2 border-transparent hover:bg-white/5 cursor-pointer flex items-center gap-3 transition-colors`;
            div.onclick = () => addToRecent(tool.title);
            div.innerHTML = `
                <div class="${isRecent ? 'text-accent-400' : 'text-slate-500'} w-6 text-center"><i class="fas ${tool.icon}"></i></div>
                <div class="flex-1">
                    <div class="text-sm font-medium text-slate-200">${tool.title}</div>
                    <div class="text-xs text-slate-500 truncate">${tool.desc}</div>
                </div>
                ${isRecent ? '<span class="text-[10px] text-accent-500 bg-accent-500/10 px-2 rounded-full">RECENT</span>' : ''}
                <i class="fas fa-arrow-right text-slate-700 text-xs"></i>
            `;
            return div;
        }

        cmdInput.addEventListener('input', (e) => renderCmdList(e.target.value));
        cmdInput.addEventListener('keydown', (e) => {
            const items = document.querySelectorAll('.cmd-item');
            if (e.key === 'ArrowDown') {
                e.preventDefault();
                selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
                updateSelection();
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                selectedIndex = Math.max(selectedIndex - 1, 0);
                updateSelection();
            } else if (e.key === 'Enter') {
                e.preventDefault();
                items[selectedIndex]?.click();
            }
        });

        function updateSelection() {
            const items = document.querySelectorAll('.cmd-item');
            items.forEach((item, idx) => {
                if (idx === selectedIndex) {
                    item.classList.add('selected');
                    item.scrollIntoView({ block: 'nearest' });
                } else {
                    item.classList.remove('selected');
                }
            });
        }

        // Shared Background Script Loader
        const script = document.createElement('script');
        script.type = 'module';
        script.src = '../shared/bg-particles.js';
        document.body.appendChild(script);

        // Navbar Blur on Scroll
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 20) { nav.classList.add('glass-panel'); nav.classList.remove('border-transparent'); }
            else { nav.classList.remove('glass-panel'); nav.classList.add('border-transparent'); }
        });
    </script>
</body>

</html>
