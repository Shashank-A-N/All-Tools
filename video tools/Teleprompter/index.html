<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Video - Teleprompter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="../../styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Rajdhani', 'sans-serif'],
                        orbitron: ['Orbitron', 'sans-serif']
                    },
                    colors: {
                        cyber: {
                            primary: '#ffffff', // White
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .mirrored {
            transform: scaleX(-1);
        }

        .flipped {
            transform: scaleY(-1);
        }

        .both {
            transform: scale(-1);
        }

        /* Custom scrollbar hide for prompting */
        #prompterArea::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>

<body
    class="min-h-screen flex flex-col font-sans overflow-x-hidden bg-black text-white selection:bg-white selection:text-black">

    <!-- Navigation -->
    <nav
        class="fixed top-0 z-50 w-full glass-effect border-b border-white/5 px-4 md:px-6 py-3 flex items-center justify-between backdrop-blur-md opacity-20 hover:opacity-100 transition-opacity">
        <a href="../index.html" class="flex items-center gap-3 text-slate-300 hover:text-white transition-colors group">
            <div
                class="w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/10 group-hover:border-white/50 transition-all">
                <i class="fas fa-chevron-left text-xs group-hover:-translate-x-0.5 transition-transform"></i>
            </div>
            <span class="font-orbitron font-bold tracking-wider hidden md:block">BACK</span>
        </a>

        <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-white/20 flex items-center justify-center text-white">
                <i class="fas fa-stream"></i>
            </div>
            <h1 class="text-lg md:text-xl font-orbitron font-bold tracking-widest text-white">SHADOW<span
                    class="text-slate-400">PROMPT</span></h1>
        </div>

        <div class="flex gap-4">
            <button onclick="toggleSettings()" class="text-white hover:text-slate-300"><i
                    class="fas fa-cog text-xl"></i></button>
        </div>
    </nav>

    <!-- Prompter Area -->
    <div id="prompterArea"
        class="w-full h-screen overflow-y-scroll py-[50vh] px-8 md:px-20 text-center leading-relaxed">
        <div id="content" class="text-6xl font-bold font-sans outline-none" contenteditable="true">
            Enter your script here...<br>
            Click Start to begin scrolling.<br>
            Adjust speed and size in settings.<br>
            <br>
            Use Mirror Mode for teleprompter hardware.<br>
        </div>
    </div>

    <!-- Controls Overlay -->
    <div id="controls"
        class="fixed bottom-0 w-full p-6 glass border-t border-white/10 flex flex-col gap-4 transition-transform duration-300 translate-y-0">

        <div class="flex justify-between items-center">
            <div class="flex items-center gap-4">
                <button id="playBtn" onclick="togglePlay()"
                    class="w-12 h-12 rounded-full bg-white text-black flex items-center justify-center text-xl hover:scale-110 transition-transform">
                    <i class="fas fa-play ml-1"></i>
                </button>
                <button onclick="reset()"
                    class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center hover:bg-slate-700">
                    <i class="fas fa-undo"></i>
                </button>
            </div>

            <div class="flex items-center gap-4 flex-1 max-w-md mx-8">
                <i class="fas fa-tachometer-alt text-slate-400"></i>
                <input type="range" id="speed" min="1" max="100" value="30" class="w-full accent-white">
            </div>

            <div class="flex items-center gap-2">
                <button onclick="toggleMirror('x')" class="px-3 py-1 bg-slate-800 rounded font-bold text-xs">MIRROR
                    X</button>
                <button onclick="toggleMirror('y')" class="px-3 py-1 bg-slate-800 rounded font-bold text-xs">MIRROR
                    Y</button>
            </div>
        </div>

        <div id="settingsPanel" class="hidden border-t border-white/5 pt-4 grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="space-y-1">
                <label class="text-xs uppercase text-slate-500">Font Size</label>
                <input type="range" min="20" max="200" value="60" oninput="setFontSize(this.value)"
                    class="w-full accent-white">
            </div>
            <div class="space-y-1">
                <label class="text-xs uppercase text-slate-500">Margin</label>
                <input type="range" min="0" max="40" value="20" oninput="setMargin(this.value)"
                    class="w-full accent-white">
            </div>
            <div class="space-y-1">
                <label class="text-xs uppercase text-slate-500">Color</label>
                <div class="flex gap-2">
                    <button onclick="setColor('white')" class="w-6 h-6 rounded-full bg-white border"></button>
                    <button onclick="setColor('#facc15')"
                        class="w-6 h-6 rounded-full bg-yellow-400 border border-transparent"></button>
                    <button onclick="setColor('#4ade80')"
                        class="w-6 h-6 rounded-full bg-green-400 border border-transparent"></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const prompter = document.getElementById('prompterArea');
        const content = document.getElementById('content');
        const playBtn = document.getElementById('playBtn');
        const speedInput = document.getElementById('speed');

        let scrolling = false;
        let animationFrame;
        let lastTime = 0;
        let scrollPos = 0;

        function togglePlay() {
            scrolling = !scrolling;
            playBtn.innerHTML = scrolling ? '<i class="fas fa-pause"></i>' : '<i class="fas fa-play ml-1"></i>';
            if (scrolling) {
                document.getElementById('controls').classList.add('opacity-50');
                lastTime = performance.now();
                scrollLoop();
            } else {
                document.getElementById('controls').classList.remove('opacity-50');
                cancelAnimationFrame(animationFrame);
            }
        }

        function scrollLoop(time) {
            if (!scrolling) return;

            const delta = time - lastTime;
            lastTime = time;

            const speed = parseInt(speedInput.value);
            // Pixels per second? 
            // Simple mapping
            const move = (speed * delta) / 100;

            prompter.scrollTop += move;

            animationFrame = requestAnimationFrame(scrollLoop);
        }

        function reset() {
            prompter.scrollTop = 0;
            scrolling = false;
            playBtn.innerHTML = '<i class="fas fa-play ml-1"></i>';
            cancelAnimationFrame(animationFrame);
            document.getElementById('controls').classList.remove('opacity-50');
        }

        function toggleMirror(axis) {
            if (axis === 'x') content.classList.toggle('mirrored');
            if (axis === 'y') content.classList.toggle('flipped');
        }

        function toggleSettings() {
            document.getElementById('settingsPanel').classList.toggle('hidden');
        }

        function setFontSize(val) {
            content.style.fontSize = val + 'px';
        }

        function setMargin(val) {
            content.style.paddingLeft = val + '%';
            content.style.paddingRight = val + '%';
        }

        function setColor(c) {
            content.style.color = c;
        }
    </script>
</body>

</html>