<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech Pro - Shadow Audio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;500;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="style.css">
    <!-- Highlight.js for potential future code reading syntax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>

<body
    class="bg-gray-950 text-slate-200 font-inter antialiased overflow-x-hidden min-h-screen flex flex-col transition-colors duration-500">

    <!-- Navbar -->
    <nav
        class="sticky top-0 z-50 glass-header border-b border-white/10 px-6 py-4 flex items-center justify-between backdrop-blur-xl transition-all w-full">
        <div class="flex items-center gap-4">
            <a href="../index.html" class="flex items-center gap-3 group">
                <div
                    class="relative w-12 h-12 flex items-center justify-center bg-gradient-to-br from-violet-600 to-fuchsia-600 rounded-xl shadow-[0_0_15px_rgba(139,92,246,0.3)] group-hover:shadow-[0_0_25px_rgba(139,92,246,0.5)] transition-all overflow-hidden border border-white/20">
                    <div
                        class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMiIgY3k9IjIiIHI9IjEiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4yKSIvPjwvc3ZnPg==')] opacity-50">
                    </div>
                    <i
                        class="fas fa-wave-square text-white text-2xl group-hover:scale-110 transition-transform relative z-10"></i>
                </div>
                <div class="hidden sm:block">
                    <h1
                        class="text-xl md:text-2xl font-orbitron font-bold tracking-widest text-white flex items-center gap-2">
                        SHADOW<span
                            class="text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-500">AUDIO</span>
                        <span
                            class="px-2 py-0.5 rounded text-[10px] bg-violet-500/20 text-violet-300 border border-violet-500/30">PRO</span>
                    </h1>
                    <span class="text-[10px] md:text-xs text-slate-400 font-mono tracking-widest">TTS STUDIO</span>
                </div>
            </a>
        </div>
        <div class="flex items-center gap-4">
            <button id="theme-toggle"
                class="w-10 h-10 rounded-lg flex items-center justify-center bg-white/5 hover:bg-white/10 border border-white/10 transition-colors"
                title="Toggle Theme (Cyberpunk/Dark/Light)">
                <i class="fas fa-paint-roller text-slate-300"></i>
            </button>
            <button id="fullscreen-btn"
                class="w-10 h-10 rounded-lg flex items-center justify-center bg-white/5 hover:bg-white/10 border border-white/10 transition-colors"
                title="Toggle Fullscreen (F11)">
                <i class="fas fa-expand text-slate-300"></i>
            </button>
            <a href="../index.html"
                class="w-10 h-10 rounded-lg flex items-center justify-center bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 text-red-400 transition-colors"
                title="Close Studio">
                <i class="fas fa-times"></i>
            </a>
        </div>
    </nav>

    <!-- Main Workspace -->
    <main class="flex-1 container mx-auto px-4 py-8 max-w-7xl relative z-10 flex flex-col lg:flex-row gap-8">

        <!-- Left Sidebar: Settings -->
        <aside class="w-full lg:w-80 flex flex-col gap-6 shrink-0" id="settings-panel">

            <!-- Voice Selection Tab -->
            <div
                class="glass-panel p-5 rounded-2xl border border-white/10 shadow-xl flex flex-col relative overflow-hidden group">
                <div
                    class="absolute top-0 right-0 w-32 h-32 bg-violet-500/10 rounded-full blur-3xl -mr-10 -mt-10 transition-all group-hover:bg-violet-500/20">
                </div>

                <h3 class="text-base md:text-lg font-bold font-orbitron mb-4 text-white flex items-center gap-2">
                    <i class="fas fa-satellite-dish text-violet-400"></i> Voice Core
                </h3>

                <div class="space-y-4 relative z-10">
                    <!-- Filters -->
                    <div class="flex gap-2">
                        <div class="relative flex-1">
                            <i
                                class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
                            <input type="text" id="voice-search" placeholder="Search voices..."
                                class="w-full bg-black/40 border border-white/10 rounded-lg pl-8 pr-3 py-2 text-sm focus:border-violet-500 focus:outline-none transition-colors">
                        </div>
                        <button id="filter-lang-btn"
                            class="w-10 h-10 rounded-lg bg-black/40 border border-white/10 flex items-center justify-center hover:bg-white/5 transition-colors"
                            title="Filter by Language">
                            <i class="fas fa-globe text-slate-300"></i>
                        </button>
                    </div>

                    <!-- Voice Select -->
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <label class="block text-[10px] font-mono text-slate-400 uppercase tracking-wider">Active
                                Voice</label>
                            <span id="voice-count" class="text-[10px] text-violet-400 font-mono">0 loaded</span>
                        </div>
                        <div class="relative">
                            <select id="voice-select"
                                class="w-full bg-black/50 border border-white/10 rounded-lg p-3 text-sm focus:border-violet-500 focus:outline-none transition-colors appearance-none cursor-pointer">
                                <option>Initializing TTS Engine...</option>
                            </select>
                            <i
                                class="fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none text-xs"></i>
                        </div>
                    </div>

                    <!-- Quick Previews -->
                    <div class="flex gap-2">
                        <button id="preview-btn"
                            class="flex-1 py-4 sm:py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs font-semibold flex items-center justify-center gap-2 transition-colors"
                            title="Test Voice">
                            <i class="fas fa-bolt text-yellow-400"></i> <span class="hidden sm:inline">Test Voice</span>
                        </button>
                        <button id="favorite-voice-btn"
                            class="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center transition-colors"
                            title="Favorite Voice">
                            <i class="far fa-star text-yellow-400"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Synthesis Controls Tab -->
            <div
                class="glass-panel p-5 rounded-2xl border border-white/10 shadow-xl flex flex-col relative overflow-hidden group">
                <h3 class="text-base md:text-lg font-bold font-orbitron mb-4 text-white flex items-center gap-2">
                    <i class="fas fa-sliders text-fuchsia-400"></i> Parameters
                </h3>

                <div class="space-y-6 relative z-10">
                    <!-- Presets -->
                    <div>
                        <label
                            class="block text-[10px] font-mono text-slate-400 mb-2 uppercase tracking-wider">Presets</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button
                                class="preset-btn py-1.5 text-xs bg-white/5 hover:bg-white/10 rounded border border-white/10 transition-colors"
                                data-rate="1" data-pitch="1">Normal</button>
                            <button
                                class="preset-btn py-1.5 text-xs bg-white/5 hover:bg-white/10 rounded border border-white/10 transition-colors"
                                data-rate="0.7" data-pitch="0.8">Deep</button>
                            <button
                                class="preset-btn py-1.5 text-xs bg-white/5 hover:bg-white/10 rounded border border-white/10 transition-colors"
                                data-rate="1.3" data-pitch="1.5">Fast</button>
                        </div>
                    </div>

                    <!-- Sliders -->
                    <div class="control-group">
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-mono text-slate-400 uppercase tracking-wider">Speed
                                (Rate)</label>
                            <span id="rate-val"
                                class="text-xs font-mono text-fuchsia-400 bg-fuchsia-900/30 px-1.5 py-0.5 rounded">1.0x</span>
                        </div>
                        <input type="range" id="rate" min="0.1" max="5" value="1" step="0.1"
                            class="custom-slider w-full" style="--slider-color: var(--fuchsia-500);">
                    </div>

                    <div class="control-group">
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-mono text-slate-400 uppercase tracking-wider">Pitch</label>
                            <span id="pitch-val"
                                class="text-xs font-mono text-violet-400 bg-violet-900/30 px-1.5 py-0.5 rounded">1.0</span>
                        </div>
                        <input type="range" id="pitch" min="0" max="2" value="1" step="0.1" class="custom-slider w-full"
                            style="--slider-color: var(--violet-500);">
                    </div>

                    <div class="control-group">
                        <div class="flex justify-between mb-2">
                            <label class="text-[10px] font-mono text-slate-400 uppercase tracking-wider">Volume</label>
                            <span id="volume-val"
                                class="text-xs font-mono text-blue-400 bg-blue-900/30 px-1.5 py-0.5 rounded">1.0</span>
                        </div>
                        <input type="range" id="volume" min="0" max="1" value="1" step="0.05"
                            class="custom-slider w-full" style="--slider-color: var(--blue-500);">
                    </div>
                </div>
            </div>

            <!-- Ambience Mixer -->
            <div class="glass-panel p-5 rounded-2xl border border-white/10 shadow-xl flex flex-col">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-base md:text-lg font-bold font-orbitron text-white flex items-center gap-2">
                        <i class="fas fa-cloud-moon text-blue-400"></i> Ambience
                    </h3>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="ambience-toggle" class="sr-only peer">
                        <div
                            class="w-9 h-5 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-500">
                        </div>
                    </label>
                </div>

                <div class="space-y-4 opacity-50 pointer-events-none transition-opacity" id="ambience-controls">
                    <select id="ambience-type"
                        class="w-full bg-black/40 border border-white/10 rounded-lg p-2 text-sm focus:border-blue-500 focus:outline-none">
                        <option value="rain">Heavy Rain</option>
                        <option value="cafe">Coffee Shop</option>
                        <option value="fire">Campfire</option>
                        <option value="white">White Noise</option>
                    </select>
                    <div>
                        <div class="flex justify-between mb-1">
                            <label class="text-[10px] font-mono text-slate-400 uppercase tracking-wider">Level</label>
                        </div>
                        <input type="range" id="ambience-volume" min="0" max="1" value="0.3" step="0.05"
                            class="custom-slider w-full" style="--slider-color: var(--blue-400);">
                    </div>
                    <audio id="ambience-audio" loop></audio>
                </div>
            </div>

        </aside>

        <!-- Main Editor Area -->
        <section class="flex-1 flex flex-col gap-4 min-w-0">

            <!-- Editor Toolbar -->
            <div
                class="glass-panel p-3 rounded-xl border border-white/10 flex flex-wrap items-center justify-between gap-4 shadow-lg">
                <div class="flex items-center gap-1 bg-black/30 p-1 rounded-lg">
                    <button
                        class="toolbar-btn w-9 h-9 flex items-center justify-center rounded hover:bg-white/10 text-slate-300 transition-colors"
                        onclick="formatText('uppercase')" title="UPPERCASE"><i class="fas fa-font"></i></button>
                    <button
                        class="toolbar-btn w-9 h-9 flex items-center justify-center rounded hover:bg-white/10 text-slate-300 transition-colors"
                        onclick="formatText('lowercase')" title="lowercase"><span
                            class="font-bold text-sm">a</span></button>
                    <button
                        class="toolbar-btn w-9 h-9 flex items-center justify-center rounded hover:bg-white/10 text-slate-300 transition-colors"
                        onclick="formatText('capitalize')" title="Capitalize"><span
                            class="font-bold text-lg">A</span></button>
                    <div class="w-px h-6 bg-white/10 mx-1"></div>
                    <button
                        class="toolbar-btn w-9 h-9 flex items-center justify-center rounded hover:bg-white/10 text-slate-300 transition-colors"
                        onclick="formatText('removeSpaces')" title="Remove Extra Spaces"><i
                            class="fas fa-align-justify"></i></button>
                    <button
                        class="toolbar-btn w-9 h-9 flex items-center justify-center rounded hover:bg-white/10 text-slate-300 transition-colors"
                        onclick="openFindReplace()" title="Find & Replace"><i class="fas fa-search-plus"></i></button>
                </div>

                <div class="flex items-center gap-2">
                    <input type="file" id="file-upload" class="hidden" accept=".txt,.md">
                    <button onclick="document.getElementById('file-upload').click()"
                        class="px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs flex items-center gap-2 text-slate-300 transition-colors"
                        title="Import Text File">
                        <i class="fas fa-file-import"></i> <span class="hidden sm:inline">Import</span>
                    </button>
                    <button id="save-txt-btn"
                        class="px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs flex items-center gap-2 text-slate-300 transition-colors"
                        title="Export as TXT">
                        <i class="fas fa-file-export"></i> <span class="hidden sm:inline">Export</span>
                    </button>
                    <button onclick="clearText()"
                        class="px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 text-red-400 rounded-lg text-xs flex items-center gap-2 transition-colors"
                        title="Clear All">
                        <i class="fas fa-trash"></i> <span class="hidden sm:inline">Clear</span>
                    </button>
                </div>
            </div>

            <!-- Text Area -->
            <div class="relative flex-1 group" id="editor-container">
                <!-- Dropzone overlay -->
                <div id="dropzone"
                    class="absolute inset-0 bg-violet-500/20 backdrop-blur-sm border-2 border-dashed border-violet-500 rounded-2xl z-20 flex flex-col items-center justify-center opacity-0 pointer-events-none transition-all">
                    <i class="fas fa-cloud-upload-alt text-4xl md:text-5xl text-violet-400 mb-4 animate-bounce"></i>
                    <h3 class="text-lg md:text-2xl font-bold text-white text-center px-4">Drop Text File Here</h3>
                </div>

                <textarea id="text-input"
                    class="w-full h-full min-h-[300px] md:min-h-[400px] glass-panel bg-black/20 border border-white/10 rounded-2xl p-4 md:p-6 text-slate-200 focus:border-violet-500 focus:ring-1 focus:ring-violet-500 focus:outline-none transition-all resize-y font-mono text-sm md:text-base leading-relaxed custom-scrollbar shadow-inner"
                    placeholder="Enter your text here. 
                
Features:
- Drag and drop text files here ðŸ“‚
- Auto-saves as you type ðŸ’¾
- Real-time word highlighting ðŸ”¦
- Basic SSML support (voices permitting) ðŸ—£ï¸
"></textarea>

                <!-- Word Highlighting Overlay (Hidden initially, used during playback) -->
                <div id="highlight-overlay"
                    class="absolute inset-0 p-4 md:p-6 pointer-events-none overflow-hidden font-mono text-sm md:text-base leading-relaxed hidden">
                    <p id="highlight-content" class="text-transparent whitespace-pre-wrap word-wrap-break-word"></p>
                </div>

                <!-- Floating Stats -->
                <div
                    class="absolute bottom-4 right-4 flex items-center gap-2 md:gap-3 bg-black/60 backdrop-blur-md px-2 md:px-3 py-1.5 rounded-full border border-white/10 text-[10px] md:text-xs font-mono text-slate-400 opacity-50 group-hover:opacity-100 transition-opacity">
                    <span title="Characters"><i class="fas fa-font mr-1"></i><span id="char-count">0</span></span>
                    <span class="w-px h-3 bg-white/20"></span>
                    <span title="Words"><i class="fas fa-align-left mr-1"></i><span id="word-count">0</span></span>
                    <span class="w-px h-3 bg-white/20"></span>
                    <span title="Est. Reading Time"><i class="far fa-clock mr-1"></i><span id="read-time">0m
                            0s</span></span>
                </div>
            </div>

            <!-- Visualizer -->
            <div class="h-24 glass-panel rounded-2xl border border-white/10 relative overflow-hidden flex flex-col justify-end px-2"
                id="visualizer-container">
                <!-- Visualizer Controls -->
                <div class="absolute top-2 right-2 z-20 flex gap-2">
                    <button
                        class="w-6 h-6 rounded bg-black/50 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-colors text-xs text-slate-400"
                        title="Change Visualizer Style" onclick="cycleVisualizer()">
                        <i class="fas fa-wave-square"></i>
                    </button>
                </div>
                <!-- Canvas for advanced visualization -->
                <canvas id="visualizer-canvas" class="absolute inset-0 w-full h-full opacity-70"></canvas>
            </div>

            <!-- Action Bar -->
            <div
                class="glass-panel p-2 md:p-4 rounded-2xl border border-white/10 flex items-center justify-between gap-2 md:gap-4 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] z-20 sticky bottom-4">

                <div class="flex items-center gap-3 flex-1">
                    <button id="play-btn"
                        class="w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white rounded-full flex items-center justify-center text-sm md:text-xl shadow-[0_0_20px_rgba(139,92,246,0.4)] hover:shadow-[0_0_30px_rgba(139,92,246,0.6)] hover:scale-105 transition-all">
                        <i class="fas fa-play ml-1"></i>
                    </button>
                    <button id="pause-btn"
                        class="w-10 h-10 md:w-12 md:h-12 bg-white/10 hover:bg-white/20 text-white rounded-full flex items-center justify-center text-sm md:text-lg border border-white/10 transition-all hidden">
                        <i class="fas fa-pause"></i>
                    </button>
                    <button id="stop-btn"
                        class="w-10 h-10 md:w-12 md:h-12 bg-white/5 hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/30 text-slate-400 rounded-full flex items-center justify-center text-sm md:text-lg border border-white/10 transition-all disabled:opacity-30 disabled:hover:bg-white/5 disabled:hover:text-slate-400">
                        <i class="fas fa-stop"></i>
                    </button>

                    <!-- Progress/Loop -->
                    <div class="flex flex-col flex-1 pl-4 pr-2">
                        <div class="flex justify-between text-xs font-mono text-slate-400 mb-1">
                            <span id="current-time">00:00</span>
                            <span id="total-time">00:00</span>
                        </div>
                        <div class="relative w-full h-2 bg-black/50 rounded-full overflow-hidden">
                            <div id="progress-bar"
                                class="absolute top-0 left-0 h-full bg-gradient-to-r from-violet-500 to-fuchsia-500 w-0 transition-all duration-300">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-3 border-l border-white/10 pl-4">
                    <button id="loop-btn"
                        class="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center transition-colors text-slate-400 disabled:opacity-50"
                        title="Loop Playback">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button id="download-btn"
                        class="px-4 py-2 bg-blue-600/20 hover:bg-blue-600/40 text-blue-400 border border-blue-500/30 rounded-lg flex items-center justify-center gap-2 font-semibold transition-all hover:scale-105"
                        title="Generate & Download Audio">
                        <i class="fas fa-download"></i> <span class="hidden sm:inline">Export Audio</span>
                    </button>
                </div>
            </div>

        </section>
    </main>

    <!-- Modals & Overlays -->
    <!-- Find & Replace Modal -->
    <div id="modal-find-replace"
        class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center opacity-0 pointer-events-none transition-opacity">
        <div class="glass-panel p-6 rounded-2xl border border-white/10 w-full max-w-md transform scale-95 transition-transform"
            id="modal-content">
            <h3 class="text-xl font-bold font-orbitron mb-4 text-white">Find & Replace</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-xs font-mono text-slate-400 mb-1">Find</label>
                    <input type="text" id="find-input"
                        class="w-full bg-black/40 border border-white/10 rounded-lg p-2 focus:border-violet-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-xs font-mono text-slate-400 mb-1">Replace With</label>
                    <input type="text" id="replace-input"
                        class="w-full bg-black/40 border border-white/10 rounded-lg p-2 focus:border-violet-500 focus:outline-none">
                </div>
                <div class="flex items-center gap-2 mt-2">
                    <input type="checkbox" id="match-case"
                        class="rounded bg-black/40 border-white/10 accent-violet-500">
                    <label for="match-case" class="text-sm text-slate-300">Match Case</label>
                </div>
                <div class="flex justify-end gap-3 mt-6">
                    <button class="px-4 py-2 text-slate-400 hover:text-white transition-colors"
                        onclick="closeModals()">Cancel</button>
                    <button class="px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors"
                        onclick="executeFindReplace()">Replace All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-24 right-4 z-[100] flex flex-col gap-2 pointer-events-none"></div>

    <script src="app.js"></script>
</body>

</html>